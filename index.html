<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>সমবায় সমিতি ক্যালকুলেটর</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main-container">

    <h1>✦ সমবায় সমিতির দৈনিক ইনভেস্টমেন্ট ক্যালকুলেটর</h1>

    <div id="control-panel">
        <label for="initialMembers">শুরুর সদস্য:</label>
        <input type="number" id="initialMembers" min="1" value="55">
        <label for="memberFee">মাথাপিছু ঋণ:</label>
        <input type="number" id="memberFee" min="1" value="9000">
        <label for="dailyContributionInput">প্রতি কিস্তি:</label>
        <input type="number" id="dailyContributionInput" min="1" value="100"> <br/>
        <label for="days">কত দিনের হিসাব?</label>
        <input type="number" id="days" min="1" value="10">
        <button onclick="generateSheet()">হিসাব দেখুন</button>
    </div>

    <h2> <p id="summary-text">শুরুতে সদস্য: ৫৫ জন | মাথাপিছু ঋণ: ৯,০০০ টাকা | প্রতি কিস্তি: ১০০ টাকা</p></h2>


    <div id="results">
        </div>

    <script>
function generateSheet() {
    // ব্যবহারকারীর ইনপুট থেকে দিনের সংখ্যা নিন
    const totalDays = parseInt(document.getElementById('days').value);
    if (isNaN(totalDays) || totalDays < 1) {
        alert("দয়া করে ১ বা তার বেশি একটি সঠিক সংখ্যা ইনপুট করুন।");
        return;
    }

    // ব্যবহারকারীর ইনপুট থেকে শুরুর সদস্য সংখ্যা নিন
    const initialMembers = parseInt(document.getElementById('initialMembers').value);
    if (isNaN(initialMembers) || initialMembers < 1) {
        alert("দয়া করে সদস্য সংখ্যা ১ বা তার বেশি একটি সঠিক সংখ্যা ইনপুট করুন।");
        return;
    }

    // ব্যবহারকারীর ইনপুট থেকে সদস্য ফি নিন
    const memberFee = parseInt(document.getElementById('memberFee').value);
    if (isNaN(memberFee) || memberFee < 1) {
        alert("দয়া করে সদস্য ফি ১ বা তার বেশি একটি সঠিক সংখ্যা ইনপুট করুন।");
        return;
    }

    // ব্যবহারকারীর ইনপুট থেকে দৈনিক চাঁদা নিন
    const dailyContribution = parseInt(document.getElementById('dailyContributionInput').value);
    if (isNaN(dailyContribution) || dailyContribution < 1) {
        alert("দয়া করে দৈনিক চাঁদা ১ বা তার বেশি একটি সঠিক সংখ্যা ইনপুট করুন।");
        return;
    }

    // প্রাথমিক/শুরুর মান সেট করা
    let currentMembers = initialMembers;
    let currentCash = 0;

    // সারাংশ টেক্সট আপডেট করুন
    document.getElementById('summary-text').innerHTML = `শুরুতে সদস্য: <strong>${initialMembers.toLocaleString('bn-BD')}</strong> জন | মাথাপিছু ঋণ: <strong>${memberFee.toLocaleString('bn-BD')}</strong> টাকা | প্রতি কিস্তি: <strong>${dailyContribution.toLocaleString('bn-BD')}</strong> টাকা`;
    
    const resultsDiv = document.getElementById('results');
    let tableHtml = '';

    // টেবিলের হেডার তৈরি
    tableHtml += `
        <table>
            <thead>
                <tr>
                    <th>দিন </th>
                    <th>শুরুর সদস্য </th>
                    <th>দৈনিক সংগ্রহ </th>
                    <th>পূর্বের ক্যাশ </th>
                    <th>মোট ক্যাশ </th>
                    <th>নতুন ইনভেস্ট </th>
                    <th>নতুন সদস্য ++</th>
                    <th>দিনের শেষে সদস্য</th>
                    <th>দিনের শেষে ক্যাশ</th>
                    <th>মোট সম্পদ</th>
                </tr>
            </thead>
            <tbody>
    `;

    // দিনের হিসাব লুপ
    for (let day = 1; day <= totalDays; day++) {
        // আজকের দিনের প্রাথমিক মান
        const startMembers = currentMembers;
        const dailyCollection = startMembers * dailyContribution;
        const previousCash = currentCash;
        
        // মোট ক্যাশ গণনা
        let totalCash = previousCash + dailyCollection;
        
        // ইনভেস্টমেন্টের লজিক
        let investmentAmount = 0;
        let newMembers = 0;
        
        // সদস্য ফি-এর গুণের ভিত্তিতে ইনভেস্টমেন্টের পরিমাণ এবং নতুন সদস্য সংখ্যা গণনা
        if (totalCash >= memberFee) {
            // k = সর্বোচ্চ পূর্ণসংখ্যা যার জন্য শর্ত পূরণ হয়
            let k = Math.floor(totalCash / memberFee); 
            investmentAmount = k * memberFee;
            newMembers = k;
        }

        // নতুন ক্যাশ ব্যালেন্স
        let endCash = totalCash - investmentAmount;
        
        // দিনের শেষে মোট সদস্য সংখ্যা আপডেট
        let endMembers = startMembers + newMembers;

        // মোট সম্পদ গণনা
        const companyValue = endMembers * memberFee;

        // পরের দিনের জন্য মানগুলো আপডেট করা
        currentMembers = endMembers;
        currentCash = endCash;

        // টেবিল রো তৈরি
        let rowClass = newMembers > 0 ? 'highlight' : '';
        if (day === totalDays) {
            rowClass += ' last-row';
        }
        tableHtml += `
            <tr class="${rowClass.trim()}">
                <td data-label="দিন (D)">${day}</td>
                <td data-label="শুরুর সদস্য (N)">${startMembers}</td>
                <td data-label="আজকের সংগ্রহ">${dailyCollection.toLocaleString('bn-BD')}</td>
                <td data-label="পূর্বের ক্যাশ">${previousCash.toLocaleString('bn-BD')}</td>
                <td data-label="মোট ক্যাশ (A)">${totalCash.toLocaleString('bn-BD')}</td>
                <td data-label="নতুন ইনভেস্টমেন্ট (I)">${investmentAmount.toLocaleString('bn-BD')}</td>
                <td data-label="নতুন সদস্য (k)">${newMembers}</td>
                <td data-label="দিনের শেষে সদস্য">${endMembers}</td>
                <td data-label="দিনের শেষে ক্যাশ">${endCash.toLocaleString('bn-BD')}</td>
                <td data-label="মোট সম্পদ">${companyValue.toLocaleString('bn-BD')}</td>
            </tr>
        `;
    }

    tableHtml += '</tbody></table>';
    resultsDiv.innerHTML ='<div class="table-container">' + tableHtml + '</div>';
}

// পেজ লোড হওয়ার সাথে সাথে ডিফল্ট ১০ দিনের হিসাব দেখানোর জন্য
document.addEventListener('DOMContentLoaded', generateSheet);
    </script>
    </div>
</body>
</html>